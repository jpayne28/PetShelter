{"filter":false,"title":"App.jsx","tooltip":"/pet-shelter-client/src/App.jsx","undoManager":{"mark":17,"position":17,"stack":[[{"start":{"row":0,"column":0},"end":{"row":15,"column":67},"action":"remove","lines":["import { useEffect, useState } from \"react\";","import \"./styles.css\";","import { Routes, Route, Link } from \"react-router-dom\";","import Header from \"./components/Header\";","import Home from \"./components/Home\";","import AboutUs from \"./components/AboutUs\";","import Pets from \"./components/Pets\";","import AdoptionForm from \"./components/AdoptionForm\";","import Footer from \"./components/Footer\";","import Applications from \"./components/Applications\";","import ApplicationDetail from \"./components/ApplicationDetail\"; ","import axios from \"axios\"","","function App() {","  const API_GATEWAY_BASE_URL = import.meta.env.VITE_API_GATEWAY_URL;","  const S3_BUCKET_URL = import.meta.env.VITE_PET_IMAGES_BUCKET_URL;"],"id":2},{"start":{"row":0,"column":0},"end":{"row":23,"column":67},"action":"insert","lines":["import { useEffect, useState } from \"react\";","// import reactLogo from './assets/react.svg'","// import viteLogo from '/vite.svg'","import \"./styles.css\";","import {Routes, Route, Link} from \"react-router-dom\";","import Header from \"./components/Header\";","import Home from \"./components/Home\";","import AboutUs from \"./components/AboutUs\";","import Pets from \"./components/Pets\";","import AdoptionForm from \"./components/AdoptionForm\";","import Footer from \"./components/Footer\";","import Applications from \"./components/Applications\";","import ApplicationDetail from \"./components/ApplicationDetail\";","import axios from \"axios\"",""," ","// Import the .env variables containing Cognito configuration information","const COGNITO_AUTH_URL = import.meta.env.VITE_COGNITO_AUTH_URL;","const CLIENT_ID = import.meta.env.VITE_CLIENT_ID; ","const REDIRECT_URI = import.meta.env.VITE_REDIRECT_URI;","","function App() {","  const API_GATEWAY_BASE_URL = import.meta.env.VITE_API_GATEWAY_URL;","  const S3_BUCKET_URL = import.meta.env.VITE_PET_IMAGES_BUCKET_URL;"]}],[{"start":{"row":1,"column":0},"end":{"row":1,"column":3},"action":"remove","lines":["// "],"id":3},{"start":{"row":2,"column":0},"end":{"row":2,"column":3},"action":"remove","lines":["// "]}],[{"start":{"row":1,"column":0},"end":{"row":1,"column":3},"action":"insert","lines":["// "],"id":4},{"start":{"row":2,"column":0},"end":{"row":2,"column":3},"action":"insert","lines":["// "]}],[{"start":{"row":25,"column":0},"end":{"row":26,"column":0},"action":"insert","lines":["",""],"id":5},{"start":{"row":26,"column":0},"end":{"row":27,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":26,"column":0},"end":{"row":26,"column":2},"action":"insert","lines":["  "],"id":6}],[{"start":{"row":26,"column":2},"end":{"row":71,"column":4},"action":"insert","lines":["const [isUserSignedIn, setIsUserSignedIn] = useState(false);","","  console.log(localStorage.getItem(\"accessToken\"));","  if (","    localStorage.getItem(\"accessToken\") == null ||","    localStorage.getItem(\"accessToken\") == \"\"","  ) {","    if (window.location.hash != null && window.location.hash != \"\") {","      const str = window.location.hash;","      const regex = /#id_token=([^&]+)/;","      const match = str.match(regex);","","      if (match) {","        const idTokenValue = match[1];","        console.log(idTokenValue); // Output: 'xxx'","        localStorage.setItem(\"accessToken\", idTokenValue);","      } else {","        console.log(\"No match found\");","      }","    }","  }","","  useEffect(() => {","    // Check if accessToken is available in localStorage","    const accessToken = localStorage.getItem(\"accessToken\");","    if (accessToken) {","      // If accessToken is available, set isUserSignedIn to true","      setIsUserSignedIn(true);","    } else {","      // If accessToken is not available, set isUserSignedIn to false","      setIsUserSignedIn(false);","    }","  }, []);","  ","  const handleSignOut = () => {","    // Clear the ID token from localStorage","    localStorage.removeItem(\"accessToken\");","","    // Clear the entire localStorage","    localStorage.clear();","","    // Wait","    setTimeout(() => {  ","      window.location.href = `${COGNITO_AUTH_URL}/logout?client_id=${CLIENT_ID}&response_type=token&scope=email+openid&logout_uri=${REDIRECT_URI}&redirect_uri=${REDIRECT_URI}`;     ","    }, 1000);","  };"],"id":7}],[{"start":{"row":24,"column":2},"end":{"row":24,"column":5},"action":"insert","lines":["// "],"id":8}],[{"start":{"row":24,"column":5},"end":{"row":24,"column":42},"action":"remove","lines":["const [pets, setPets] = useState([]);"],"id":9},{"start":{"row":24,"column":1},"end":{"row":24,"column":38},"action":"insert","lines":["const [pets, setPets] = useState([]);"]}],[{"start":{"row":24,"column":0},"end":{"row":24,"column":2},"action":"insert","lines":["//"],"id":10}],[{"start":{"row":24,"column":0},"end":{"row":24,"column":3},"action":"remove","lines":["// "],"id":11}],[{"start":{"row":24,"column":0},"end":{"row":24,"column":2},"action":"insert","lines":["  "],"id":12}],[{"start":{"row":24,"column":42},"end":{"row":24,"column":43},"action":"remove","lines":[" "],"id":13},{"start":{"row":24,"column":41},"end":{"row":24,"column":42},"action":"remove","lines":["/"]},{"start":{"row":24,"column":40},"end":{"row":24,"column":41},"action":"remove","lines":["/"]}],[{"start":{"row":0,"column":0},"end":{"row":23,"column":67},"action":"remove","lines":["import { useEffect, useState } from \"react\";","// import reactLogo from './assets/react.svg'","// import viteLogo from '/vite.svg'","import \"./styles.css\";","import {Routes, Route, Link} from \"react-router-dom\";","import Header from \"./components/Header\";","import Home from \"./components/Home\";","import AboutUs from \"./components/AboutUs\";","import Pets from \"./components/Pets\";","import AdoptionForm from \"./components/AdoptionForm\";","import Footer from \"./components/Footer\";","import Applications from \"./components/Applications\";","import ApplicationDetail from \"./components/ApplicationDetail\";","import axios from \"axios\"",""," ","// Import the .env variables containing Cognito configuration information","const COGNITO_AUTH_URL = import.meta.env.VITE_COGNITO_AUTH_URL;","const CLIENT_ID = import.meta.env.VITE_CLIENT_ID; ","const REDIRECT_URI = import.meta.env.VITE_REDIRECT_URI;","","function App() {","  const API_GATEWAY_BASE_URL = import.meta.env.VITE_API_GATEWAY_URL;","  const S3_BUCKET_URL = import.meta.env.VITE_PET_IMAGES_BUCKET_URL;"],"id":14},{"start":{"row":0,"column":0},"end":{"row":24,"column":0},"action":"insert","lines":["import { useEffect, useState } from \"react\";","// import reactLogo from './assets/react.svg'","// import viteLogo from '/vite.svg'","import \"./styles.css\";","import {Routes, Route, Link} from \"react-router-dom\";","import Header from \"./components/Header\";","import Home from \"./components/Home\";","import AboutUs from \"./components/AboutUs\";","import Pets from \"./components/Pets\";","import AdoptionForm from \"./components/AdoptionForm\";","import Footer from \"./components/Footer\";","import Applications from \"./components/Applications\";","import ApplicationDetail from \"./components/ApplicationDetail\";","import axios from \"axios\"",""," ","// Import the .env variables containing Cognito configuration information","const COGNITO_AUTH_URL = import.meta.env.VITE_COGNITO_AUTH_URL;","const CLIENT_ID = import.meta.env.VITE_CLIENT_ID; ","const REDIRECT_URI = import.meta.env.VITE_REDIRECT_URI;","","function App() {","  const API_GATEWAY_BASE_URL = import.meta.env.VITE_API_GATEWAY_URL;","  const S3_BUCKET_URL = import.meta.env.VITE_PET_IMAGES_BUCKET_URL;",""]}],[{"start":{"row":25,"column":2},"end":{"row":25,"column":40},"action":"remove","lines":["const [pets, setPets] = useState([]); "],"id":15},{"start":{"row":25,"column":0},"end":{"row":25,"column":2},"action":"remove","lines":["  "]},{"start":{"row":24,"column":0},"end":{"row":25,"column":0},"action":"remove","lines":["",""]},{"start":{"row":23,"column":67},"end":{"row":24,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":81,"column":0},"end":{"row":81,"column":2},"action":"insert","lines":["  "],"id":16}],[{"start":{"row":81,"column":2},"end":{"row":81,"column":40},"action":"insert","lines":["const [pets, setPets] = useState([]); "],"id":17}],[{"start":{"row":25,"column":1},"end":{"row":70,"column":4},"action":"remove","lines":[" const [isUserSignedIn, setIsUserSignedIn] = useState(false);","","  console.log(localStorage.getItem(\"accessToken\"));","  if (","    localStorage.getItem(\"accessToken\") == null ||","    localStorage.getItem(\"accessToken\") == \"\"","  ) {","    if (window.location.hash != null && window.location.hash != \"\") {","      const str = window.location.hash;","      const regex = /#id_token=([^&]+)/;","      const match = str.match(regex);","","      if (match) {","        const idTokenValue = match[1];","        console.log(idTokenValue); // Output: 'xxx'","        localStorage.setItem(\"accessToken\", idTokenValue);","      } else {","        console.log(\"No match found\");","      }","    }","  }","","  useEffect(() => {","    // Check if accessToken is available in localStorage","    const accessToken = localStorage.getItem(\"accessToken\");","    if (accessToken) {","      // If accessToken is available, set isUserSignedIn to true","      setIsUserSignedIn(true);","    } else {","      // If accessToken is not available, set isUserSignedIn to false","      setIsUserSignedIn(false);","    }","  }, []);","  ","  const handleSignOut = () => {","    // Clear the ID token from localStorage","    localStorage.removeItem(\"accessToken\");","","    // Clear the entire localStorage","    localStorage.clear();","","    // Wait","    setTimeout(() => {  ","      window.location.href = `${COGNITO_AUTH_URL}/logout?client_id=${CLIENT_ID}&response_type=token&scope=email+openid&logout_uri=${REDIRECT_URI}&redirect_uri=${REDIRECT_URI}`;     ","    }, 1000);","  };"],"id":18},{"start":{"row":25,"column":1},"end":{"row":71,"column":4},"action":"insert","lines":["  ","  const [isUserSignedIn, setIsUserSignedIn] = useState(false);","","  console.log(localStorage.getItem(\"accessToken\"));","  if (","    localStorage.getItem(\"accessToken\") == null ||","    localStorage.getItem(\"accessToken\") == \"\"","  ) {","    if (window.location.hash != null && window.location.hash != \"\") {","      const str = window.location.hash;","      const regex = /#id_token=([^&]+)/;","      const match = str.match(regex);","","      if (match) {","        const idTokenValue = match[1];","        console.log(idTokenValue); // Output: 'xxx'","        localStorage.setItem(\"accessToken\", idTokenValue);","      } else {","        console.log(\"No match found\");","      }","    }","  }","","  useEffect(() => {","    // Check if accessToken is available in localStorage","    const accessToken = localStorage.getItem(\"accessToken\");","    if (accessToken) {","      // If accessToken is available, set isUserSignedIn to true","      setIsUserSignedIn(true);","    } else {","      // If accessToken is not available, set isUserSignedIn to false","      setIsUserSignedIn(false);","    }","  }, []);","  ","  const handleSignOut = () => {","    // Clear the ID token from localStorage","    localStorage.removeItem(\"accessToken\");","","    // Clear the entire localStorage","    localStorage.clear();","","    // Wait","    setTimeout(() => {  ","      window.location.href = `${COGNITO_AUTH_URL}/logout?client_id=${CLIENT_ID}&response_type=token&scope=email+openid&logout_uri=${REDIRECT_URI}&redirect_uri=${REDIRECT_URI}`;     ","    }, 1000);","  };"]}],[{"start":{"row":73,"column":2},"end":{"row":101,"column":19},"action":"remove","lines":["useEffect(()=>{","    // get pets from api","    axios.get(`${API_GATEWAY_BASE_URL}/pets`)","      .then(res => {","        console.log(res.data);","        setPets(res.data.pets);","      })","      .catch(err => console.log(err))","  },[])","  const [pets, setPets] = useState([]); ","  return (","    <div className=\"App\">","      <Header />","      <main>","        <Routes>","          <Route path=\"/\" element={<Home />} />","          <Route path=\"/about\" element={<AboutUs />} />","          <Route path=\"/pets\" element={<Pets pets={pets}/>} />","          <Route path=\"/adopt\" element={<AdoptionForm pets={pets}/>} />","          <Route path=\"/applications\" element={<Applications />} />","          <Route path=\"/applications/:id\" element={<ApplicationDetail/>}/>","        </Routes>","      </main>","      <Footer/>","    </div>","  );","}","","export default App;"],"id":19},{"start":{"row":73,"column":2},"end":{"row":143,"column":19},"action":"insert","lines":["useEffect(()=>{","    // get pets from api","    axios.get(`${API_GATEWAY_BASE_URL}/pets`)","      .then(res => {","        console.log(res.data);","        setPets(res.data.pets);","      })","      .catch(err => console.log(err))","  },[])","  const [pets, setPets] = useState([]);","  return (","    <div className=\"App\">","      <Header isUserSignedIn={isUserSignedIn}/>","      {/* at the route /, the home compnent renders */}","      <main>","        <div>","          {isUserSignedIn ? (","            // Render content for signed-in users","            <div>","              <div>Signed in as employee</div>","              <button","                onClick={handleSignOut}","                style={{","                  color: \"white\",","                  backgroundColor: \"red\",","                  padding: \"8px 16px\",","                  border: \"none\",","                  borderRadius: \"4px\",","                  cursor: \"pointer\",","                  margin: \"10px\"","                }}","              >","                Sign Out","              </button>               ","            </div>","          ) : (","            // Render content for signed-out users","            <div>","              <a href={`${COGNITO_AUTH_URL}/login?client_id=${CLIENT_ID}&response_type=token&scope=email+openid&redirect_uri=${REDIRECT_URI}`}>","                <button","                  style={{","                    color: \"white\",","                    backgroundColor: \"blue\",","                    padding: \"8px 16px\",","                    border: \"none\",","                    borderRadius: \"4px\",","                    cursor: \"pointer\",","                    margin: \"10px\"","                  }}","                >","                Employee Sign In","              </button> ","              </a>               ","            </div>","          )}","        </div>","        <Routes>","          <Route path=\"/\" element={<Home />} />","          <Route path=\"/about\" element={<AboutUs />} />","          <Route path=\"/pets\" element={<Pets pets={pets}/>} />","          <Route path=\"/adopt\" element={<AdoptionForm pets={pets}/>} />","          <Route path=\"/applications\" element={<Applications />} />","          <Route path=\"/applications/:id\" element={<ApplicationDetail/>}/>","        </Routes>","      </main>","      <Footer/>","    </div>","  );","}","","export default App;"]}]]},"ace":{"folds":[],"scrolltop":1767,"scrollleft":0,"selection":{"start":{"row":143,"column":19},"end":{"row":143,"column":19},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1738631030255,"hash":"a862723058f26360220faead2e47d7e7a70c2d92"}